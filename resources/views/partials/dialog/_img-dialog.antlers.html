{{# glide/partials/img contains another lightbox_toggle #}}
{{# This is wrapped around parial:glide/glide make sure to add a closing div after the partial #}}
{{# style overlay background: app/dialog.css #}}

<{{ asset_credit_toggle && credit ||  asset_caption_toggle && global_caption ? "figure" : "div"}} {{ if lightbox_toggle }} x-data="{ open: false }" {{ /if }} class="not-prose">
	{{ if lightbox_toggle }}<dialog 
		x-ref="dialog" 
		@close="open = false"
		x-trap.noscroll="open"
		class="rounded-lg p-4 bg-white shadow-lg fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 max-w-[90vw] max-h-[90vh] m-0 ">

		<button @click="$refs.dialog.close()" class="w-[44px] h-[44px] absolute top-8 right-8 group flex items-center justify-center rounded
			
   focus:outline-hidden

	focus:bg-red-500 focus:border-white focus:outline-white

	focus-visible:bg-red-500 focus-visible:border-white focus-visible:outline-white focus-visible:hover:bg-red-700

   bg-white hover:bg-red-500 
		 
		 ">{{ partial:partials/icon/_icon icon_css="h-4 w-4 stroke-black group-focus:stroke-white group-hover:stroke-white" icon_path="cross"}}</button>

		 {{ if img_ratio === 'wide' }}
			{{ partial:glide/partials/img  :url="url" img_css="w-full h-auto" :img_ratio="img_ratio" sizes="(min-width: 768px) 75vw, (min-width: 320px) 90vw"}}
		{{ elseif img_ratio === 'square' }}
		{{ partial:glide/partials/img  :url="url" img_css="w-full h-auto max-h-[80vh]" :img_ratio="img_ratio" sizes="(min-width: 768px) 75vw, (min-width: 320px) 90vw"}}
		{{ elseif img_ratio === 'classic' }}		
			{{ partial:glide/partials/img  :url="url" img_css="w-full h-auto max-h-[80vh]" :img_ratio="img_ratio" sizes="(min-width: 768px) 75vw, (min-width: 320px) 90vw"}}
			{{ elseif img_ratio === 'no_crop' }}		
			{{ partial:glide/partials/img  :url="url" img_css="w-full h-auto max-h-[80vh]" :img_ratio="img_ratio" sizes="(min-width: 768px) 75vw, (min-width: 320px) 90vw"}}
		{{ /if }}

		{{ partial:partials/bard/blocks/partials/credit-caption }}

	   
	</dialog>

		<button  @click="open = true; $nextTick(() => $refs.dialog.showModal())" class="relative block group bg-black cursor-pointer" >
		{{ if toggle_zoom_icon }}
			{{ partial:partials/icon/_icon icon_css=" absolute z-10 top-4 right-4  fill-black " icon_path="magnify"}}  
		{{ else }}
			{{ partial:partials/icon/_icon icon_css=" absolute z-10 top-4 right-4  fill-white " icon_path="magnify"}}  
		{{ /if }}

	{{ /if }}

		{{ slot }}

	{{ if lightbox_toggle }}</button>{{ /if }}

	{{ partial:partials/bard/blocks/partials/credit-caption }}

</{{ asset_credit_toggle && credit ||  asset_caption_toggle && global_caption ? "figure" : "div"}}>